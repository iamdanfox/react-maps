<!doctype html>
<html>
<head>
<title>React Maps</title>

<link rel="stylesheet" href="style.css">
</head>
<body>

<h1><a href="../">React Maps (Refreshable)</a></h1>

<div id="map"></div>

<!--     <pre class="install-sh">npm install react-maps --save</pre> -->
<hr>

<ul>
  <li><a>Refreshable</a></li>
  <li><a href="multiple.html">Multiple Maps</a></li>
  <li><a href="polylines.html">Polylines</a></li>
</ul>

<pre class="demo"></pre>

<hr>

<div class="footer">
  <p>made for fun by <a href="http://twitter.com/iamdanfox">iamdanfox</a></p>
  <iframe src="http://ghbtns.com/github-btn.html?user=iamdanfox&amp;repo=react-maps&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
</div>



<script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.10.0/react.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.10.0/JSXTransformer.js"></script>
<script src="../src/map.js" type="text/javascript"></script>

<script type="text/jsx" class="demo">/** @jsx React.DOM */

RefreshMap = React.createClass({
  getInitialState: function(){
    return {
      zoom: 6,
      center:   {latitude:60.1876172,longitude:24.815366},
      points: [ {latitude:60.1876172,longitude:24.815366}  ]
    }
  },

  randomize: function(){
    randomPoints = [
      {latitude:60.1876172+Math.random()-0.5,longitude:24.815366+Math.random()-0.5},
      {latitude:60.185478+Math.random()-0.5,longitude:24.812257+Math.random()-0.5},
      {latitude:60.2049747+Math.random()-0.5,longitude:24.9634712+Math.random()-0.5}
    ]
    this.setState({points:randomPoints})
  },

  updateZoom: function(){
    this.refs.myMap.updateZoom( Math.floor(Math.random()*14) )
  },

  updateCenter: function(){
    this.refs.myMap.updateCenter(60.1876172+2*Math.random()-1, 24.815366+2*Math.random()-1)
  },

  render: function(){
    return (<div>
      <Map ref='myMap' points={this.state.points}
       initLat={this.state.center.latitude} initLon={this.state.center.longitude}
       initZoom={this.state.zoom} width='100%' height={300} />
      <button onClick={this.randomize}>Randomize Points</button>
      <button onClick={this.updateZoom}>Update Zoom</button>
      <button onClick={this.updateCenter}>Update Center</button>
    </div>)
  }
})

React.renderComponent(<RefreshMap />, document.querySelector('#map'))</script>

<!-- Copy javascript into <pre> and colour it nicely -->
<script src="highlighter.js"></script>
</body>
</html>
